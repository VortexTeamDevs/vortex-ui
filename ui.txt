-- VortexHub UI Library
-- Created by Late
-- Version: 2.0
-- Clean & Modern Design

local VortexHub = {}

function VortexHub:CreateWindow(windowName)
    windowName = windowName or "VortexHub"
    
    -- Services
    local UserInputService = game:GetService("UserInputService")
    local TweenService = game:GetService("TweenService")
    
    -- Colors
    local Colors = {
        Background = Color3.fromRGB(10, 10, 10),
        Header = Color3.fromRGB(20, 20, 20),
        Tab = Color3.fromRGB(15, 15, 15),
        Content = Color3.fromRGB(12, 12, 12),
        Element = Color3.fromRGB(25, 25, 25),
        Primary = Color3.fromRGB(0, 100, 255),
        Text = Color3.fromRGB(255, 255, 255),
        SubText = Color3.fromRGB(180, 180, 180)
    }
    
    -- Main UI Instances
    local ScreenGui = Instance.new("ScreenGui")
    local MainFrame = Instance.new("Frame")
    local MainCorner = Instance.new("UICorner")
    local MainStroke = Instance.new("UIStroke")
    local Header = Instance.new("Frame")
    local Title = Instance.new("TextLabel")
    local CloseButton = Instance.new("TextButton")
    local TabContainer = Instance.new("Frame")
    local TabList = Instance.new("UIListLayout")
    local ContentContainer = Instance.new("Frame")
    local PagesFolder = Instance.new("Folder")
    
    -- ScreenGui Setup
    ScreenGui.Name = "VortexHubUI"
    ScreenGui.Parent = game.CoreGui
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- Main Frame (Compact Design)
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.BackgroundColor3 = Colors.Background
    MainFrame.BorderSizePixel = 0
    MainFrame.ClipsDescendants = true
    MainFrame.Position = UDim2.new(0.3, 0, 0.3, 0)
    MainFrame.Size = UDim2.new(0, 350, 0, 250)
    
    MainCorner.CornerRadius = UDim.new(0, 6)
    MainCorner.Name = "MainCorner"
    MainCorner.Parent = MainFrame
    
    MainStroke.Color = Color3.fromRGB(40, 40, 40)
    MainStroke.Thickness = 1
    MainStroke.Parent = MainFrame
    
    -- Header (Simplified)
    Header.Name = "Header"
    Header.Parent = MainFrame
    Header.BackgroundColor3 = Colors.Header
    Header.Size = UDim2.new(1, 0, 0, 30)
    
    Title.Name = "Title"
    Title.Parent = Header
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.Size = UDim2.new(0, 200, 1, 0)
    Title.Font = Enum.Font.GothamBold
    Title.Text = windowName
    Title.TextColor3 = Colors.Text
    Title.TextSize = 13
    Title.TextXAlignment = Enum.TextXAlignment.Left
    
    CloseButton.Name = "CloseButton"
    CloseButton.Parent = Header
    CloseButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    CloseButton.Position = UDim2.new(1, -25, 0.5, -8)
    CloseButton.Size = UDim2.new(0, 16, 0, 16)
    CloseButton.Font = Enum.Font.GothamBold
    CloseButton.Text = "Ã—"
    CloseButton.TextColor3 = Colors.Text
    CloseButton.TextSize = 14
    CloseButton.AutoButtonColor = false
    
    -- Tab Container (Clean)
    TabContainer.Name = "TabContainer"
    TabContainer.Parent = MainFrame
    TabContainer.BackgroundColor3 = Colors.Tab
    TabContainer.Position = UDim2.new(0, 0, 0, 30)
    TabContainer.Size = UDim2.new(0, 80, 0, 220)
    
    TabList.Name = "TabList"
    TabList.Parent = TabContainer
    TabList.HorizontalAlignment = Enum.HorizontalAlignment.Center
    TabList.SortOrder = Enum.SortOrder.LayoutOrder
    TabList.Padding = UDim.new(0, 3)
    
    -- Content Container
    ContentContainer.Name = "ContentContainer"
    ContentContainer.Parent = MainFrame
    ContentContainer.BackgroundColor3 = Colors.Content
    ContentContainer.Position = UDim2.new(0, 85, 0, 30)
    ContentContainer.Size = UDim2.new(0, 260, 0, 220)
    
    -- Pages Folder
    PagesFolder.Name = "PagesFolder"
    PagesFolder.Parent = ContentContainer
    
    -- Close Button Functionality
    local isMinimized = false
    CloseButton.MouseButton1Click:Connect(function()
        isMinimized = not isMinimized
        if isMinimized then
            MainFrame:TweenSize(UDim2.new(0, 350, 0, 30), "Out", "Quad", 0.2)
        else
            MainFrame:TweenSize(UDim2.new(0, 350, 0, 250), "Out", "Quad", 0.2)
        end
    end)
    
    -- Hover effects for close button
    CloseButton.MouseEnter:Connect(function()
        TweenService:Create(CloseButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(255, 80, 80)
        }):Play()
    end)
    
    CloseButton.MouseLeave:Connect(function()
        TweenService:Create(CloseButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(255, 60, 60)
        }):Play()
    end)
    
    -- Drag Functionality
    local dragging = false
    local dragInput, dragStart, startPos
    
    Header.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    Header.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    -- Tab Handler
    local TabHandler = {}
    
    function TabHandler:CreateTab(tabName)
        tabName = tabName or "Tab"
        
        -- Tab Button
        local TabButton = Instance.new("TextButton")
        
        TabButton.Name = "TabButton_" .. tabName
        TabButton.Parent = TabContainer
        TabButton.BackgroundColor3 = Colors.Element
        TabButton.Size = UDim2.new(0, 70, 0, 25)
        TabButton.Font = Enum.Font.Gotham
        TabButton.Text = tabName
        TabButton.TextColor3 = Colors.SubText
        TabButton.TextSize = 11
        TabButton.AutoButtonColor = false
        
        -- Tab Content
        local TabContent = Instance.new("ScrollingFrame")
        local ContentList = Instance.new("UIListLayout")
        local ContentPadding = Instance.new("UIPadding")
        
        TabContent.Name = "TabContent_" .. tabName
        TabContent.Parent = PagesFolder
        TabContent.BackgroundTransparency = 1
        TabContent.Size = UDim2.new(1, 0, 1, 0)
        TabContent.ScrollBarThickness = 2
        TabContent.ScrollBarImageColor3 = Colors.Primary
        TabContent.Visible = false
        
        ContentList.Name = "ContentList"
        ContentList.Parent = TabContent
        ContentList.SortOrder = Enum.SortOrder.LayoutOrder
        ContentList.Padding = UDim.new(0, 5)
        
        ContentPadding.Name = "ContentPadding"
        ContentPadding.Parent = TabContent
        ContentPadding.PaddingLeft = UDim.new(0, 8)
        ContentPadding.PaddingTop = UDim.new(0, 8)
        
        -- Auto resize content
        local function UpdateContentSize()
            local contentSize = ContentList.AbsoluteContentSize
            TabContent.CanvasSize = UDim2.new(0, 0, 0, contentSize.Y + 10)
        end
        
        ContentList:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(UpdateContentSize)
        UpdateContentSize()
        
        -- Tab click event
        TabButton.MouseButton1Click:Connect(function()
            -- Hide all pages
            for _, page in pairs(PagesFolder:GetChildren()) do
                page.Visible = false
            end
            
            -- Reset all tab colors
            for _, tab in pairs(TabContainer:GetChildren()) do
                if tab:IsA("TextButton") then
                    TweenService:Create(tab, TweenInfo.new(0.2), {
                        BackgroundColor3 = Colors.Element,
                        TextColor3 = Colors.SubText
                    }):Play()
                end
            end
            
            -- Show selected page and highlight tab
            TabContent.Visible = true
            TweenService:Create(TabButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Colors.Primary,
                TextColor3 = Colors.Text
            }):Play()
            
            UpdateContentSize()
        end)
        
        -- Element Handler
        local ElementHandler = {}
        
        function ElementHandler:Button(buttonText, callback)
            callback = callback or function() end
            
            local Button = Instance.new("TextButton")
            
            Button.Name = "Button"
            Button.Parent = TabContent
            Button.BackgroundColor3 = Colors.Primary
            Button.Size = UDim2.new(1, -16, 0, 30)
            Button.Font = Enum.Font.Gotham
            Button.Text = buttonText
            Button.TextColor3 = Colors.Text
            Button.TextSize = 12
            Button.AutoButtonColor = false
            
            -- Hover effects
            Button.MouseEnter:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(30, 120, 255)
                }):Play()
            end)
            
            Button.MouseLeave:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.2), {
                    BackgroundColor3 = Colors.Primary
                }):Play()
            end)
            
            Button.MouseButton1Click:Connect(function()
                callback()
            end)
            
            UpdateContentSize()
        end
        
        function ElementHandler:Toggle(toggleText, defaultValue, callback)
            defaultValue = defaultValue or false
            callback = callback or function() end
            
            local ToggleFrame = Instance.new("Frame")
            local ToggleLabel = Instance.new("TextLabel")
            local ToggleButton = Instance.new("TextButton")
            local ToggleCircle = Instance.new("Frame")
            
            ToggleFrame.Name = "ToggleFrame"
            ToggleFrame.Parent = TabContent
            ToggleFrame.BackgroundColor3 = Colors.Element
            ToggleFrame.Size = UDim2.new(1, -16, 0, 25)
            
            ToggleLabel.Name = "ToggleLabel"
            ToggleLabel.Parent = ToggleFrame
            ToggleLabel.BackgroundTransparency = 1
            ToggleLabel.Position = UDim2.new(0, 8, 0, 0)
            ToggleLabel.Size = UDim2.new(0, 150, 1, 0)
            ToggleLabel.Font = Enum.Font.Gotham
            ToggleLabel.Text = toggleText
            ToggleLabel.TextColor3 = Colors.Text
            ToggleLabel.TextSize = 11
            ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
            
            ToggleButton.Name = "ToggleButton"
            ToggleButton.Parent = ToggleFrame
            ToggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            ToggleButton.Position = UDim2.new(1, -35, 0.5, -8)
            ToggleButton.Size = UDim2.new(0, 30, 0, 16)
            ToggleButton.AutoButtonColor = false
            ToggleButton.Text = ""
            
            ToggleCircle.Name = "ToggleCircle"
            ToggleCircle.Parent = ToggleButton
            ToggleCircle.BackgroundColor3 = Colors.Text
            ToggleCircle.Position = UDim2.new(0, 2, 0.5, -6)
            ToggleCircle.Size = UDim2.new(0, 12, 0, 12)
            
            local isToggled = defaultValue
            
            local function updateToggle()
                if isToggled then
                    TweenService:Create(ToggleButton, TweenInfo.new(0.2), {
                        BackgroundColor3 = Colors.Primary
                    }):Play()
                    TweenService:Create(ToggleCircle, TweenInfo.new(0.2), {
                        Position = UDim2.new(1, -14, 0.5, -6)
                    }):Play()
                else
                    TweenService:Create(ToggleButton, TweenInfo.new(0.2), {
                        BackgroundColor3 = Color3.fromRGB(60, 60, 60)
                    }):Play()
                    TweenService:Create(ToggleCircle, TweenInfo.new(0.2), {
                        Position = UDim2.new(0, 2, 0.5, -6)
                    }):Play()
                end
                callback(isToggled)
            end
            
            ToggleButton.MouseButton1Click:Connect(function()
                isToggled = not isToggled
                updateToggle()
            end)
            
            updateToggle()
            UpdateContentSize()
        end
        
        function ElementHandler:Label(labelText)
            local Label = Instance.new("TextLabel")
            
            Label.Name = "Label"
            Label.Parent = TabContent
            Label.BackgroundTransparency = 1
            Label.Size = UDim2.new(1, -16, 0, 20)
            Label.Font = Enum.Font.Gotham
            Label.Text = labelText
            Label.TextColor3 = Colors.SubText
            Label.TextSize = 11
            Label.TextXAlignment = Enum.TextXAlignment.Left
            
            UpdateContentSize()
        end
        
        function ElementHandler:Slider(sliderText, minVal, maxVal, defaultValue, callback)
            minVal = minVal or 0
            maxVal = maxVal or 100
            defaultValue = defaultValue or minVal
            callback = callback or function() end
            
            local SliderFrame = Instance.new("Frame")
            local SliderLabel = Instance.new("TextLabel")
            local SliderValue = Instance.new("TextLabel")
            local SliderTrack = Instance.new("Frame")
            local SliderFill = Instance.new("Frame")
            local SliderButton = Instance.new("TextButton")
            
            SliderFrame.Name = "SliderFrame"
            SliderFrame.Parent = TabContent
            SliderFrame.BackgroundColor3 = Colors.Element
            SliderFrame.Size = UDim2.new(1, -16, 0, 40)
            
            SliderLabel.Name = "SliderLabel"
            SliderLabel.Parent = SliderFrame
            SliderLabel.BackgroundTransparency = 1
            SliderLabel.Position = UDim2.new(0, 8, 0, 5)
            SliderLabel.Size = UDim2.new(0, 150, 0, 15)
            SliderLabel.Font = Enum.Font.Gotham
            SliderLabel.Text = sliderText
            SliderLabel.TextColor3 = Colors.Text
            SliderLabel.TextSize = 11
            SliderLabel.TextXAlignment = Enum.TextXAlignment.Left
            
            SliderValue.Name = "SliderValue"
            SliderValue.Parent = SliderFrame
            SliderValue.BackgroundTransparency = 1
            SliderValue.Position = UDim2.new(1, -40, 0, 5)
            SliderValue.Size = UDim2.new(0, 32, 0, 15)
            SliderValue.Font = Enum.Font.Gotham
            SliderValue.Text = tostring(defaultValue)
            SliderValue.TextColor3 = Colors.SubText
            SliderValue.TextSize = 11
            
            SliderTrack.Name = "SliderTrack"
            SliderTrack.Parent = SliderFrame
            SliderTrack.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            SliderTrack.Position = UDim2.new(0, 8, 1, -20)
            SliderTrack.Size = UDim2.new(1, -16, 0, 6)
            
            SliderFill.Name = "SliderFill"
            SliderFill.Parent = SliderTrack
            SliderFill.BackgroundColor3 = Colors.Primary
            SliderFill.Size = UDim2.new((defaultValue - minVal) / (maxVal - minVal), 0, 1, 0)
            
            SliderButton.Name = "SliderButton"
            SliderButton.Parent = SliderTrack
            SliderButton.BackgroundTransparency = 1
            SliderButton.Size = UDim2.new(1, 0, 1, 0)
            SliderButton.Text = ""
            SliderButton.ZIndex = 2
            
            local isSliding = false
            
            local function updateSlider(value)
                value = math.clamp(value, minVal, maxVal)
                local scale = (value - minVal) / (maxVal - minVal)
                
                TweenService:Create(SliderFill, TweenInfo.new(0.1), {
                    Size = UDim2.new(scale, 0, 1, 0)
                }):Play()
                
                SliderValue.Text = tostring(math.floor(value))
                callback(value)
            end
            
            SliderButton.MouseButton1Down:Connect(function()
                isSliding = true
                
                local connection
                connection = UserInputService.InputChanged:Connect(function(input)
                    if isSliding and input.UserInputType == Enum.UserInputType.MouseMovement then
                        local pos = SliderTrack.AbsolutePosition
                        local size = SliderTrack.AbsoluteSize
                        local x = math.clamp(input.Position.X - pos.X, 0, size.X)
                        local value = minVal + (x / size.X) * (maxVal - minVal)
                        updateSlider(value)
                    end
                end)
                
                UserInputService.InputEnded:Connect(function(input)
                    if input.UserInputType == Enum.UserInputType.MouseButton1 then
                        isSliding = false
                        connection:Disconnect()
                    end
                end)
            end)
            
            UpdateContentSize()
        end
        
        -- Auto-select first tab
        if #TabContainer:GetChildren() == 2 then -- First tab + UIListLayout
            wait()
            TabButton.MouseButton1Click:Connect(function() end)()
        end
        
        return ElementHandler
    end
    
    return TabHandler
end

return VortexHub
